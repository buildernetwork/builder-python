<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>builder.py</title>
  <link rel="stylesheet" href="../../pycco.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <div class='section'>
    <div class='docs'><h1>builder.py</h1></div>
  </div>
  <div class='clearall'>
  <div class='section' id='section-0'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-0'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">imports</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">import</span> <span class="nn">api</span>
<span class="kn">import</span> <span class="nn">util</span>

<span class="kn">import</span> <span class="nn">os</span> <span class="c1"># used for git</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-1'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-1'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">builder</span><span class="p">(</span><span class="n">command</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-2'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-2'>#</a>
      </div>
      <p>Define command-line argument parser</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Builder command-line interpreter.&#39;</span><span class="p">)</span>
	<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;command&#39;</span><span class="p">)</span>
	<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;option1&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
	<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;option2&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-3'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-3'>#</a>
      </div>
      <p>TODO: Make these optional arguments only show up for relevant argument trees.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-v&#39;</span><span class="p">,</span> <span class="s1">&#39;--virtual&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;specify virtual machine (use with init)&#39;</span><span class="p">)</span>
	<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-r&#39;</span><span class="p">,</span> <span class="s1">&#39;--role&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;workspace&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;workspace&#39;</span><span class="p">,</span><span class="s1">&#39;builder&#39;</span><span class="p">],</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;specify role of builder context (use with init)&#39;</span><span class="p">)</span>
	<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--component&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;append&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;models&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="p">[],</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Add models for command.&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-4'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-4'>#</a>
      </div>
      <p>Parse arguments</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="n">args</span> <span class="o">=</span> <span class="bp">None</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">command</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
		<span class="n">myargs</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
		<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">myargs</span><span class="p">)</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-5'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-5'>#</a>
      </div>
      <p>TODO: Search for all available "builder_*" files in toolchain and print error with command to repair the toolchain.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	

	<span class="k">if</span> <span class="ow">not</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;init&#39;</span><span class="p">:</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">util</span><span class="o">.</span><span class="n">is_builder_tree</span><span class="p">():</span>
			<span class="k">print</span> <span class="s1">&#39;Error: I can</span><span class="se">\&#39;</span><span class="s1">t do that.&#39;</span>
			<span class="k">print</span> <span class="s1">&#39;Reason: There is no .builder directory in the current or parent directories.&#39;</span>
			<span class="k">print</span> <span class="s1">&#39;Hint: Run `builder init`.&#39;</span> 
			<span class="k">return</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-6'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-6'>#</a>
      </div>
      <p>TODO: make sure <code>builder init</code> was called prior to other commands!</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-7'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-7'>#</a>
      </div>
      <p>TODO: during <code>builder init</code>, load device .yaml files into memory! then can set state and push to device (and sync, eventually)
TODO: don't worry about filesystem too much for now... just load model (proxy for download), then update state through API... DO THIS IN CONTROLLER? NOT CLI? PROBALBY!!!!!!!</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;port&#39;</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-8'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-8'>#</a>
      </div>
      <p>path = os.path.join(util.get_builder_root(), '_robot', 'motors', 'right-servo', 'model-device-builder.yaml')</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">util</span><span class="o">.</span><span class="n">get_builder_root</span><span class="p">(),</span> <span class="s1">&#39;.builder&#39;</span><span class="p">,</span> <span class="s1">&#39;devices&#39;</span><span class="p">,</span> <span class="s1">&#39;builder-8.0.0.yaml&#39;</span><span class="p">)</span>
		<span class="n">device</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">Device</span><span class="p">(</span><span class="n">model_path</span><span class="o">=</span><span class="n">path</span><span class="p">)</span>
		<span class="k">for</span> <span class="n">port</span> <span class="ow">in</span> <span class="n">device</span><span class="o">.</span><span class="n">get_ports</span><span class="p">():</span>
			<span class="k">print</span> <span class="n">port</span><span class="o">.</span><span class="n">mode</span>
			<span class="k">print</span> <span class="n">port</span><span class="o">.</span><span class="n">direction</span>
			<span class="k">print</span> <span class="n">port</span><span class="o">.</span><span class="n">voltage</span>
		<span class="k">print</span> <span class="n">port</span><span class="o">.</span><span class="n">states</span>
	
		<span class="k">return</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-9'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-9'>#</a>
      </div>
      <p>builder git machineee/raspberry-pi-3</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;git&#39;</span><span class="p">:</span>

		<span class="n">username</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># &#39;machineeeee&#39;</span>
		<span class="n">repository</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># &#39;raspberry-pi-3&#39;</span>

		<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Cloning </span><span class="si">%s</span><span class="s1">/</span><span class="si">%s</span><span class="s1"> to </span><span class="si">%s</span><span class="s1">/</span><span class="si">%s</span><span class="s1">/</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">repository</span><span class="p">,</span> <span class="s1">&#39;.builder/devices&#39;</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">repository</span><span class="p">))</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-10'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-10'>#</a>
      </div>
      <p>git.create_packages_directory()
git.clone_github_repository(username, repository, '%s/%s' % (os.getcwdu(), '.packages'))</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="n">git</span><span class="o">.</span><span class="n">clone_github_repository</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">repository</span><span class="p">)</span>

		<span class="k">return</span>


	<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;init&quot;</span><span class="p">:</span>
		<span class="n">init</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">option1</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">role</span><span class="p">)</span>

	<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;status&#39;</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-11'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-11'>#</a>
      </div>
      <p>TODO: Print current status. Ex: 'running', 'paused', 'stopped'</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="bp">None</span>	

	<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;start&quot;</span><span class="p">:</span>

		<span class="k">print</span> <span class="s1">&#39;▒█▀▀█ ▒█░▒█ ▀█▀ ▒█░░░ ▒█▀▀▄ ▒█▀▀▀ ▒█▀▀█ &#39;</span>
		<span class="k">print</span> <span class="s1">&#39;▒█▀▀▄ ▒█░▒█ ▒█░ ▒█░░░ ▒█░▒█ ▒█▀▀▀ ▒█▄▄▀ &#39;</span>
		<span class="k">print</span> <span class="s1">&#39;▒█▄▄█ ░▀▄▄▀ ▄█▄ ▒█▄▄█ ▒█▄▄▀ ▒█▄▄▄ ▒█░▒█ &#39;</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-12'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-12'>#</a>
      </div>
      <p>TODO: for hosts, load their own device file, and the device files for connected peripherals, their controllers, etc.; init in-memory state of board</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="n">service</span><span class="o">.</span><span class="n">manage</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
		<span class="n">service</span><span class="o">.</span><span class="n">announce</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
	<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;pause&quot;</span><span class="p">:</span>
		<span class="n">service</span><span class="o">.</span><span class="n">manage</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
		<span class="n">service</span><span class="o">.</span><span class="n">announce</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-13'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-13'>#</a>
      </div>
      <p>TODO: Suspend VMs! <code>vagrant suspend</code> (Y/N)</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;resume&quot;</span><span class="p">:</span>
		<span class="n">service</span><span class="o">.</span><span class="n">manage</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
		<span class="n">service</span><span class="o">.</span><span class="n">announce</span><span class="o">.</span><span class="n">start</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-14'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-14'>#</a>
      </div>
      <p>TODO: Resume VMs! <code>vagrant resume</code> (if suspended)</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;stop&quot;</span><span class="p">:</span>
		<span class="n">service</span><span class="o">.</span><span class="n">manage</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
		<span class="n">service</span><span class="o">.</span><span class="n">announce</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-15'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-15'>#</a>
      </div>
      <p>TODO: Start VMs! <code>vagrant suspend</code></p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;announce&#39;</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;start&#39;</span><span class="p">:</span>
			<span class="n">service</span><span class="o">.</span><span class="n">announce</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
		<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;run&#39;</span><span class="p">:</span>
			<span class="n">service</span><span class="o">.</span><span class="n">announce</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
		<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;stop&#39;</span><span class="p">:</span>
			<span class="n">service</span><span class="o">.</span><span class="n">announce</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
	<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;manage&#39;</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;start&#39;</span><span class="p">:</span>
			<span class="n">service</span><span class="o">.</span><span class="n">manage</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
		<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;run&#39;</span><span class="p">:</span>
			<span class="n">service</span><span class="o">.</span><span class="n">manage</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
		<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;stop&#39;</span><span class="p">:</span>
			<span class="n">service</span><span class="o">.</span><span class="n">manage</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
	<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;monitor&#39;</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;start&#39;</span><span class="p">:</span>
			<span class="bp">None</span>
		<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;run&#39;</span><span class="p">:</span>
			<span class="n">service</span><span class="o">.</span><span class="n">watchdir</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
		<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;stop&#39;</span><span class="p">:</span>
			<span class="bp">None</span>
	

	<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;assemble&#39;</span><span class="p">:</span>
		<span class="n">assemble</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">models</span><span class="p">)</span>
	

	<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;project&#39;</span><span class="p">:</span> <span class="c1"># app</span>
		<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;list&#39;</span><span class="p">:</span>
			<span class="bp">None</span>
		<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;add&#39;</span><span class="p">:</span>
			<span class="bp">None</span>
		<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;remove&#39;</span><span class="p">:</span>
			<span class="bp">None</span>
	<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;device&#39;</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;list&#39;</span><span class="p">:</span>
			<span class="n">device</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">option2</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;search&#39;</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-16'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-16'>#</a>
      </div>
      <p>TODO: Search device registry for a device name/description matching specified string/regex</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>			<span class="bp">None</span>
		<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;add&#39;</span><span class="p">:</span>
			<span class="n">device</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">option2</span><span class="p">,</span> <span class="n">virtual</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">virtual</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;start&#39;</span><span class="p">:</span>
			<span class="n">device</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">option2</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;ssh&#39;</span><span class="p">:</span>
			<span class="n">device</span><span class="o">.</span><span class="n">ssh</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">option2</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;restart&#39;</span><span class="p">:</span>
			<span class="n">device</span><span class="o">.</span><span class="n">restart</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">option2</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;pause&#39;</span><span class="p">:</span>
			<span class="n">device</span><span class="o">.</span><span class="n">pause</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">option2</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;stop&#39;</span><span class="p">:</span>
			<span class="n">device</span><span class="o">.</span><span class="n">stop</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">option2</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;remove&#39;</span><span class="p">:</span>
			<span class="n">device</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">option2</span><span class="p">)</span>
	<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;interface&#39;</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;list&#39;</span><span class="p">:</span>
			<span class="bp">None</span>
		<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;add&#39;</span><span class="p">:</span>
			<span class="n">interface</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">option2</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;remove&#39;</span><span class="p">:</span>
			<span class="n">interface</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">option2</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;compose&#39;</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-17'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-17'>#</a>
      </div>
      <p>TODO: Composes multiple interfaces under a new interface. Generates interface file with dependencies.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>			<span class="bp">None</span>
	<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;controller&#39;</span><span class="p">:</span> <span class="c1"># logic</span>
		<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;list&#39;</span><span class="p">:</span>
			<span class="bp">None</span>
		<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;add&#39;</span><span class="p">:</span>
			<span class="bp">None</span>
		<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;remove&#39;</span><span class="p">:</span>
			<span class="bp">None</span>
	<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;view&#39;</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;list&#39;</span><span class="p">:</span>
			<span class="bp">None</span>
		<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;add&#39;</span><span class="p">:</span>
			<span class="bp">None</span>
		<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">option1</span> <span class="o">==</span> <span class="s1">&#39;remove&#39;</span><span class="p">:</span>
			<span class="bp">None</span>
	<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;material&#39;</span><span class="p">:</span> <span class="c1"># Alt: &#39;design&#39;, &#39;asset&#39; (CAD design file)</span>
		<span class="bp">None</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-18'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-18'>#</a>
      </div>
      <p>builder port add digital,output,ttl --interface servo
builder port add digital,output,ttl --interface servo
builder port add digital,output,ttl --interface servo</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-19'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-19'>#</a>
      </div>
      <p>builder interface deploy|assign <device-name></p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-20'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-20'>#</a>
      </div>
      <p>builder interface assemble|install</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-21'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-21'>#</a>
      </div>
      <p>builder assemble|install</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-22'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-22'>#</a>
      </div>
      <p>builder deploy</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;log&#39;</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-23'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-23'>#</a>
      </div>
      <p>TODO: builder [device <name>] log <announce|manage|command></p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="bp">None</span>

	<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;sync&#39;</span><span class="p">:</span>
		<span class="n">sync</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">option1</span><span class="p">)</span>

	<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;login&#39;</span><span class="p">:</span>
		<span class="bp">None</span>
	<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;logout&#39;</span><span class="p">:</span>
		<span class="bp">None</span>
	<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;signup&#39;</span><span class="p">:</span>
		<span class="bp">None</span>
	<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;whoami&#39;</span><span class="p">:</span>
		<span class="bp">None</span>
	<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;clean&quot;</span><span class="p">:</span>
		<span class="n">clean</span><span class="p">()</span>

	<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;version&quot;</span><span class="p">:</span>
		<span class="n">api</span><span class="o">.</span><span class="n">version</span><span class="p">()</span>
	
	<span class="k">else</span><span class="p">:</span>
		<span class="k">print</span> <span class="s1">&#39;Error: I can</span><span class="se">\&#39;</span><span class="s1">t do that.&#39;</span>
		<span class="k">print</span> <span class="s1">&#39;Reason: Unrecognized expression.&#39;</span>
		<span class="k">print</span> <span class="s1">&#39;Hint: Run `builder help` to see what I can do.&#39;</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-24'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-24'>#</a>
      </div>
      <p>TODO: INCORPORATE UDP I/O (LIKE ECHO) INTO LIST TO RETURN STRINGS FROM DEVICES. MAKE "listing" A PARAMETER IN DEVICE Builderfile. / "sync" (if not list): CREATES FOLDERS ON LOCAL SYSTEM FOR DISCOVERED DEVICES (ADD-ONLY UNLESS COMMAND TO CLEANUP/REBASE) WITH SYNC FOLDERS.
TODO: COMMAND-LINE IASM. START WITH COMMAND ON A HOST/DEVICE: ./builder interface add mokogobo/ir-rangefinder ; THEN IT DOWNLOADS THE CONFIG FOR THE FILE, ASKS WHICH PINS TO USE (OR AUTO-SELECT, BASED ON INTERNAL STATE), THEN GIVES YOU ON-SCREEN INSTRUCTIONS TO ASSEMBLE/EDIT STATE.
"IT'S ACTUALLY FUN TO PROGRAM BY JUMPING AROUND SEEING THE HIGHLIGHTED DEVICE SO YOU KNOW WHERE YOU'RE WORKING, AND SEEING HUD ON PHONE AND IN WINDOWS ON DESKTOP (SUMMONABLE/ASSIGNABLE VIA COMMAND LINE. SHOW UP AS SNAPPABLE WINDOWS. CAN SAVE AND CHANGE VIEWS WITH A COMMAND AS WELL. CAN MAKE ALWAYS ON TOP, TOO.).</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
	<span class="n">builder</span><span class="p">()</span>

</pre></div>
    </div>
  </div>
  <div class='clearall'></div>
</div>
</body>
